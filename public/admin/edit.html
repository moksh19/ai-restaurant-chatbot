<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8"/>
  <title>Edit Restaurant</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50">

<div class="max-w-xl mx-auto bg-white shadow mt-10 p-6 rounded">
  <h1 class="text-2xl font-bold mb-4">Edit Restaurant</h1>

  <label class="block font-semibold">Name</label>
  <input id="name" class="border p-2 w-full mb-3"/>

  <label class="block font-semibold">Hours</label>
  <input id="hours" class="border p-2 w-full mb-3"/>

  <button onclick="update()" class="bg-blue-600 text-white px-4 py-2 rounded">Update</button>

  <a href="/admin/index.html" class="block mt-4 text-blue-600 underline">Back</a>
</div>

<script>
const url = new URL(window.location.href);
const id = url.searchParams.get("id");

async function load() {
  const res = await fetch("/restaurants");
  const data = await res.json();
  const r = data.find(x => x.id === id);

  if (!r) return alert("Restaurant not found");

  document.getElementById("name").value = r.name;
  document.getElementById("hours").value = r.hours;
}

async function update() {
  const payload = {
    name: document.getElementById("name").value,
    hours: document.getElementById("hours").value
  };

  await fetch(`/restaurants/${id}`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload)
  });

  alert("Updated!");
  window.location = "/admin/index.html";
}

load();
</script>
</body>
</html>
